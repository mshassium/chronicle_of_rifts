Игра платформер 

# ХРОНИКИ РАЗЛОМОВ: История для 2D платформера

## ВСЕЛЕННАЯ

### Мир Кель’дорас

Кель’дорас — осколок некогда великого мира, расколотого древней магией на парящие острова. Эти острова висят над бездной, именуемой **Пустошью Забвения**, откуда поднимаются потоки искажённой энергии.

Мир населяют несколько народов:

**Светорождённые** — высокие существа с золотистой кожей, хранители древних знаний. Их столица Аурелион стоит на центральном острове.

**Дети Камня** — коренастые мастера, живущие в пещерных городах парящих скал. Они строят мосты между островами.

**Лесные духи** — полупрозрачные создания, обитающие в летающих рощах. Они поддерживают баланс магии.

**Скверные** — те, кого коснулась тьма Пустоши. Они служат силам разрушения.

### Источники силы

Мир держится на **Пяти Якорях** — древних кристаллах, установленных первыми магами после Раскола. Каждый Якорь не даёт островам рухнуть в бездну и поддерживает барьер против тьмы.

-----

## ПРЕДЫСТОРИЯ

Тысячу лет назад маг по имени **Велькор** попытался объединить силу всех Якорей, чтобы восстановить расколотый мир. Но он не учёл, что бездна… голодна. Пустошь Забвения — не просто пропасть, а **спящее божество разрушения**, и оно пробудилось от прикосновения к такой силе.

Велькор был поглощён, но не уничтожен. Он стал **Вестником Бездны** — существом, одновременно живым и мёртвым, связанным с волей Пустоши.

Герои того времени не смогли убить Велькора — только запечатать. Его заточили в **Цитадели Вечных Цепей**, а печать связали с Пятью Якорями. Пока Якоря целы — Велькор спит.

-----

## НАЧАЛО ИГРЫ

### Главный герой: Каэль

**Каэль** — молодой светорождённый из касты Стражей Якорей. Это наследственная обязанность: его семья веками охраняла восточный Якорь на острове Рассветный Шпиль.

Игра начинается в ночь, когда Каэль дежурит у Якоря. Внезапно кристалл мерцает, и в его свете появляется образ: **женщина в тёмных доспехах** с глазами, горящими фиолетовым огнём.

Это **Моргана**, верховная жрица культа Пустоши. Она произносит:

> *«Печать слабеет. Пять станут ничем. Хозяин проснётся, и мир познает тишину».*

Кристалл трескается. Остров содрогается.

Каэль бежит в деревню и находит её в огне. Культисты атаковали одновременно все острова. Его наставник, старый страж **Торвальд**, умирает на его руках, успев сказать:

> *«Якоря… культ хочет их уничтожить… ты должен… предупредить Аурелион… найти других стражей…»*

-----

## СТРУКТУРА УРОВНЕЙ

### **УРОВЕНЬ 1: Рассветный Шпиль** (обучение)

*Локация: Горящая деревня и путь к мосту*

**Сюжет:** Каэль пробирается через разрушенную родную деревню. Повсюду культисты-новички и искажённые твари, вырвавшиеся из трещины в Якоре.

**Атмосфера:** Деревянные дома, каменные башни, всё в огне. Жители бегут. На заднем плане виден треснувший Якорь, испускающий тёмные молнии.

**Механика:** Базовые враги (культисты с кинжалами, мелкие скверные твари). Игрок учится прыгать, атаковать, собирать кристаллы маны.

**Мини-босс:** **Осквернитель** — бывший страж, обращённый тьмой. Когда-то был другом Каэля.

**После победы:** Каэль находит записку от отца (который пропал годы назад). В ней координаты тайного убежища на Мосту Детей Камня.

-----

### **УРОВЕНЬ 2: Мосты Бездны**

*Локация: Цепные мосты между островами*

**Сюжет:** Каэль пересекает древние мосты, построенные Детьми Камня. Но культ уже здесь — они разрушают переходы, чтобы изолировать острова друг от друга.

**Атмосфера:** Каменные мосты и цепи над бесконечной пропастью. Ветер срывает камни. Вдали видны парящие острова. Из бездны поднимаются щупальца тьмы.

**Механика:** Платформы, которые рушатся. Движущиеся платформы-вагонетки. Нужно успеть пройти до обрыва.

**Новые враги:** Летающие скверные глаза (следят и стреляют), культисты с арбалетами.

**Босс:** **Магистр Цепей Грондар** — предавший свой народ Сын Камня. Он гигантский, с механическими руками, разрушает мост во время боя.

**После победы:** Грондар перед смертью говорит: *«Ты опоздал… три Якоря уже пали… скоро и остальные…»* Каэль понимает масштаб катастрофы.

-----

### **УРОВЕНЬ 3: Корни Мира**

*Локация: Летающая роща — гигантские деревья на парящих скалах*

**Сюжет:** Каэль ищет помощи у Лесных Духов, но роща заражена скверной. Дух-хранитель **Эльвира** заперта в сердце древнего дерева — её нужно освободить.

**Атмосфера:** Искривлённые деревья, светящиеся грибы, реки сока. Красивое, но больное — листья чернеют, корни гниют.

**Механика:** Прыжки по веткам, грибам-батутам, лианам. Некоторые растения атакуют.

**Новые враги:** Заражённые духи (призрачные, проходят сквозь стены), живые корни.

**Мини-босс:** **Гниющий Страж** — древний энт, обращённый скверной.

**Босс:** **Сердце Скверны** — паразит внутри древнего дерева. Многофазный бой: сначала щупальца, потом ядро.

**После победы:** Освобождённая Эльвира присоединяется к Каэлю как союзник. Она даёт ему **Семя Жизни** — артефакт, способный очищать малые источники скверны. Она говорит, что чувствует: четвёртый Якорь ещё цел, на острове Аурелион.

-----

### **УРОВЕНЬ 4: Подземелья Аурелиона**

*Локация: Катакомбы под столицей светорождённых*

**Сюжет:** Аурелион захвачен. Культ установил контроль над городом, а выжившие прячутся в подземельях. Каэль должен пробраться через катакомбы, чтобы найти сопротивление.

**Атмосфера:** Древние гробницы, золотые саркофаги, забытые храмы. Темно, только редкие факелы. Культисты проводят ритуалы, поднимая мёртвых.

**Механика:** Тёмные зоны (видно мало), факелы как спасение. Скрытные участки — нужно прятаться от патрулей.

**Новые враги:** Поднятые мертвецы, культисты-некроманты.

**Важная сцена:** Каэль находит **Корину** — бывшую жрицу света, ныне командира подполья. Она потеряла руку в бою, но не сдалась.

**Босс:** **Архинекромант Сальвус** — он проводит ритуал, чтобы поднять древнего короля светорождённых как своего раба.

**После победы:** Корина объясняет ситуацию. Культ контролирует четыре из пяти Якорей. Последний — в Цитадели Вечных Цепей, там же, где заточён Велькор. Моргана направляется туда, чтобы завершить ритуал пробуждения. Но чтобы добраться до Цитадели, нужно пройти через **Штормовые Пики** и **Море Осколков**.

-----

### **УРОВЕНЬ 5: Штормовые Пики**

*Локация: Ледяные горы на северном острове*

**Сюжет:** Единственный путь к Цитадели лежит через замёрзшие горы. Здесь обитают остатки древнего народа — **Ледяные Стражи**, големы, созданные для защиты прохода. Но скверна и их не обошла стороной.

**Атмосфера:** Снег, лёд, ветер. Замёрзшие крепости, ледяные пещеры. Красиво и смертельно.

**Механика:** Скользкие платформы, сосульки падают, снежные лавины нужно обгонять.

**Новые враги:** Ледяные големы (медленные, но прочные), снежные элементали.

**Важная находка:** В глубине пещер Каэль находит **записи своего отца**. Оказывается, его отец **Тариэль** не пропал — он узнал о планах культа за годы до атаки и отправился искать способ остановить их. След ведёт к Цитадели.

**Босс:** **Страж Перевала Кромар** — гигантский ледяной голем, защищающий проход. Он не злой, просто повреждён скверной. После победы можно либо уничтожить его, либо очистить Семенем Жизни (если очистить — он откроет тайный проход).

-----

### **УРОВЕНЬ 6: Море Осколков**

*Локация: Архипелаг крошечных островков над бездной*

**Сюжет:** Между Штормовыми Пиками и Цитаделью — россыпь маленьких парящих камней. Здесь нет дорог, только прыжки с осколка на осколок. И здесь гнездятся **Пожиратели Неба** — крылатые твари Пустоши.

**Атмосфера:** Открытое небо, крошечные острова, одинокие руины. Внизу — фиолетовый свет бездны становится всё ярче. Чувствуется, что цель близко.

**Механика:** Платформинг в чистом виде. Острова разных размеров, некоторые двигаются, некоторые исчезают.

**Новые враги:** Пожиратели Неба (похищают игрока, нужно вырваться), летающие культисты на ездовых тварях.

**Важная сцена:** На полпути Каэль встречает **Моргану** лично. Она не атакует, а разговаривает:

> *«Ты так похож на отца. Он тоже верил, что может что-то изменить. Он был в Цитадели, знаешь ли. Был.»*

Она исчезает, оставляя вопрос: жив ли отец?

**Босс:** **Королева Пожирателей Скирра** — огромная крылатая тварь. Бой происходит на движущихся островах, она атакует с воздуха.

-----

### **УРОВЕНЬ 7: Врата Цитадели**

*Локация: Внешние укрепления Цитадели Вечных Цепей*

**Сюжет:** Цитадель — крепость, построенная вокруг последнего Якоря и тюрьмы Велькора. Культ превратил её в свою базу. Армия скверных охраняет подступы.

**Атмосфера:** Мрачная крепость из чёрного камня. Цепи повсюду — они символизируют оковы Велькора. Фиолетовые огни, алтари, знамёна культа.

**Механика:** Комбинация боёв и платформинга. Ловушки: шипы, огнемёты, падающие решётки.

**Новые враги:** Элитные культисты (быстрые, с магией), демоны-стражи.

**Важная сцена:** Каэль находит камеру, где содержались пленники. Среди записей — имя отца. Он был здесь. Недавно.

**Босс:** **Генерал Скверны Малторус** — командир армии культа. Бывший паладин, падший во тьму. Огромный, в искажённых доспехах. Бой тяжёлый, несколько фаз.

**После победы:** Врата в глубины Цитадели открыты.

-----

### **УРОВЕНЬ 8: Сердце Цитадели**

*Локация: Внутренние залы крепости*

**Сюжет:** Каэль продвигается к центру, где находится последний Якорь. По пути он находит правду о своём отце.

**Атмосфера:** Древняя архитектура, смесь красоты и ужаса. Стены покрыты рунами сдерживания. Слышен низкий гул — это «дыхание» спящего Велькора.

**Механика:** Головоломки с рунами (нужно активировать в правильном порядке), платформы над пропастями.

**Ключевая сцена:** В одном из залов Каэль находит **отца**. Тариэль жив, но… изменён. Его тело наполовину поглощено скверной. Он боролся с влиянием годами, собирая информацию.

Тариэль объясняет:

> *«Моргана — не главная. Она лишь сосуд. Велькор говорит через неё. Когда последний Якорь падёт, он не просто проснётся — он поглотит весь мир, как поглотил меня.*
> 
> *Но есть способ. В самой глубине, у трона Велькора, есть Сердце Печати — источник, от которого питаются все Якоря. Если влить в него чистую силу в момент ритуала… можно не просто остановить пробуждение, а обратить его. Запечатать навсегда.*
> 
> *Семя Жизни, что дала тебе Эльвира — это чистая сила. Но кто-то должен остаться, чтобы завершить ритуал…»*

Тариэль отдаёт Каэлю свой меч — **Рассветный Клинок**, семейную реликвию.

**Босс:** Нет традиционного босса. Вместо этого — волны врагов, пока Тариэль взламывает последнюю дверь. В конце он говорит:

> *«Иди. Я задержу их столько, сколько смогу.»*

-----

### **УРОВЕНЬ 9: Тронный Зал Бездны**

*Локация: Камера, где заточён Велькор*

**Сюжет:** Финальное противостояние. Моргана уже начала ритуал. Последний Якорь трескается. Силуэт Велькора начинает обретать форму за пеленой тьмы.

**Атмосфера:** Огромный зал с колоннами-цепями. В центре — трон из чёрного камня, на котором материализуется фигура Велькора. Пол покрыт светящимися рунами. Якорь-кристалл висит над троном, и от него отлетают осколки.

**Босс: Моргана, Голос Бездны**

Трёхфазный бой:

**Фаза 1:** Моргана использует теневую магию. Телепортируется, призывает щупальца из пола.

**Фаза 2:** Она сливается с тенью Велькора, становясь полупрозрачной. Атакует волнами тьмы. Нужно бить, когда она материализуется.

**Фаза 3:** В отчаянии она призывает осколок силы Велькора. Её форма искажается, она становится полудемоном. Самая сложная фаза.

**После победы:** Моргана падает, но смеётся:

> *«Ты опоздал… он уже здесь…»*

Якорь разрушается. Цепи лопаются. Велькор начинает подниматься.

-----

### **УРОВЕНЬ 10: Пробуждение**

*Локация: Тот же зал, но трансформированный*

**Сюжет:** Финальная битва. Велькор не полностью пробудился — ритуал прерван, но не остановлен. Каэль должен использовать Семя Жизни, чтобы запечатать его навсегда.

**Атмосфера:** Хаос. Пол разрушается, открывая бездну. Колонны падают. Велькор — гигантская фигура из тьмы и цепей — возвышается в центре.

**Финальный босс: Велькор, Вестник Бездны**

Это не бой в традиционном смысле. Велькор слишком огромен, чтобы драться напрямую. Нужно:

**Этап 1:** Добраться до четырёх оставшихся цепей, которые всё ещё сдерживают его. Активировать их рунами, пока Велькор атакует (лучи тьмы, волны, призыв миньонов).

**Этап 2:** С каждой активированной цепью Велькор слабеет. После всех четырёх — он падает на колени, и открывается путь к Сердцу Печати.

**Этап 3:** Финальный платформинг — подняться по обломкам к трону, уворачиваясь от последних атак Велькора. Он пытается схватить Каэля тёмными щупальцами.

**Кульминация:** Каэль достигает Сердца Печати и вкладывает в него Семя Жизни.

Вспышка света. Велькор кричит — не от боли, а от ярости. Чистая энергия жизни несовместима с его природой. Новая печать формируется — сильнее прежней. Велькор снова погружается в сон, но на этот раз цепи золотые, а не чёрные.

-----

## ЭПИЛОГ

Свет заполняет зал.

Когда Каэль приходит в себя, он лежит на полу разрушенной Цитадели. Над ним — открытое небо. Крепость рухнула, но остров всё ещё парит.

**Рядом — отец.** Тариэль сумел добраться до сына. Скверна отступила от его тела — чистая энергия Семени очистила и его.

> **Тариэль:** *«Ты сделал это. Ты сделал то, что не смогли мы.»*
> 
> **Каэль:** *«Мы сделали. Все мы.»*

Появляется **Эльвира** (она чувствовала момент через связь с Семенем) и **Корина** с отрядом сопротивления.

**Финальная сцена:** Каэль стоит на краю острова. Внизу — бездна, но она больше не кажется такой угрожающей. Пурпурное свечение сменилось тусклым серым.

Рядом — союзники.
За спиной — разрушенная Цитадель, но и новая золотая печать, сияющая среди руин.

**Голос Каэля (закадровый):**

> *«Велькор будет спать. Возможно, вечно. Возможно, нет. Но мы будем готовы. Мы восстановим Якоря. Отстроим мосты. И когда тьма снова поднимет голову — мы встретим её.*
> 
> *Вместе.»*

**Камера поднимается**, показывая парящие острова Кель’дораса. Рассвет. Солнечные лучи касаются каждого острова.

**Титры.**

-----

## ПОСЛЕТИТРОВАЯ СЦЕНА (тизер продолжения)

Тьма. Глубины бездны.

Что-то шевелится.

Голос — древний, нечеловеческий:

> *«Один вестник спит… но я не один…»*

Вдалеке, в глубине Пустоши Забвения, открываются два глаза — куда больше, чем были у Велькора.

**Затемнение.**

-----

## ДОПОЛНИТЕЛЬНЫЕ ЭЛЕМЕНТЫ

### Коллекционные предметы (опционально)

- **Страницы Хроник** — разбросаны по уровням, рассказывают историю Раскола и первых стражей
- **Реликвии предков** — оружие и броня павших героев прошлого
- **Воспоминания отца** — флешбэки, показывающие путь Тариэля

### Способности Каэля (прогрессия)

1. **Базовая атака** — удар мечом
1. **Световой рывок** (ур. 3) — короткий дэш с уроном
1. **Щит предков** (ур. 5) — кратковременная неуязвимость
1. **Очищение** (ур. 7) — снимает негативные эффекты, наносит урон скверным
1. **Рассветный удар** (ур. 9) — мощная финальная атака

-----

Эта история создаёт полный эмоциональный путь: от потери дома через надежду и союзы к воссоединению с отцом и спасению мира. Каждый уровень продвигает сюжет и вводит новые элементы вселенной.​​​​​​​​​​​​​​​​



# ПЛАН РАЗРАБОТКИ: Хроники Разломов

## 2D Платформер для iOS

-----

## ОБЗОР ПРОЕКТА

**Технологический стек:**

- **Движок:** SpriteKit (нативный для iOS, отлично подходит для 2D)
- **Язык:** Swift
- **IDE:** Xcode
- **Минимальная iOS:** 15.0
- **Целевые устройства:** iPhone, iPad

**Почему SpriteKit:**

- Нативная интеграция с iOS
- Отличная производительность для 2D
- Встроенная физика
- Claude Code хорошо знает Swift и SpriteKit

-----

## ФАЗА 0: ПОДГОТОВКА ОКРУЖЕНИЯ

**Срок: 1 день**

### 0.1 Установка инструментов

```
Задачи для Claude Code:
□ Проверить версию Xcode (нужна 15+)
□ Настроить Apple Developer Account
□ Создать сертификаты разработчика
□ Настроить provisioning profiles
```

### 0.2 Создание проекта

```
Команда Claude Code:
"Создай новый iOS проект SpriteKit с названием 'ChroniclesOfRifts'.
Структура папок:
- Scenes/
- Entities/
- Components/
- Managers/
- Resources/
  - Textures/
  - Audio/
  - Fonts/
- Levels/
- Utils/

Настрой поддержку landscape orientation only.
Минимальная iOS 15.0, Swift 5.9"
```

### 0.3 Настройка Git

```
Команда Claude Code:
"Инициализируй git репозиторий.
Создай .gitignore для Xcode/Swift проекта.
Создай начальный коммит."
```

-----

## ФАЗА 1: АРХИТЕКТУРА И БАЗОВЫЙ КАРКАС

**Срок: 3-4 дня**

### 1.1 Игровая архитектура

```
Команда Claude Code:
"Создай базовую архитектуру игры:

1. GameManager (синглтон):
   - Управление состояниями (menu, playing, paused, gameOver)
   - Сохранение прогресса (UserDefaults + Codable)
   - Настройки звука

2. SceneManager:
   - Загрузка/выгрузка сцен
   - Переходы между сценами с анимацией

3. Протокол GameScene:
   - Базовый класс для всех игровых сцен

4. InputManager:
   - Обработка touch input
   - Виртуальный джойстик
   - Кнопки действий

Используй паттерн Entity-Component где уместно."
```

### 1.2 Система уровней

```
Команда Claude Code:
"Создай систему загрузки уровней:

1. LevelData (Codable struct):
   - Массив тайлов фона
   - Массив платформ (позиция, размер, тип)
   - Массив врагов (тип, позиция, патруль)
   - Позиция игрока
   - Позиция выхода
   - Коллекционные предметы
   - Триггеры событий/диалогов

2. LevelLoader:
   - Парсинг JSON файла уровня
   - Создание нод SpriteKit из данных

3. Создай шаблон JSON для одного уровня"
```

### 1.3 Камера и viewport

```
Команда Claude Code:
"Реализуй систему камеры:

1. GameCamera (SKCameraNode subclass):
   - Следование за игроком с плавным отставанием
   - Ограничение по границам уровня
   - Методы для zoom in/out
   - Shake эффект для ударов/взрывов

2. Параллакс для фоновых слоёв (3 слоя)"
```

### 1.4 Система ввода (touch controls)

```
Команда Claude Code:
"Создай touch-управление в стиле Mario:

1. VirtualJoystick:
   - Левая часть экрана
   - Только горизонтальное движение
   - Визуальный индикатор (полупрозрачный)

2. ActionButtons:
   - Кнопка прыжка (правая нижняя часть)
   - Кнопка атаки (над прыжком)
   - Визуальная обратная связь при нажатии

3. Настраиваемая чувствительность
4. Поддержка мультитача"
```

-----

## ФАЗА 2: ИГРОК И ФИЗИКА

**Срок: 4-5 дней**

### 2.1 Персонаж игрока

```
Команда Claude Code:
"Создай класс Player:

1. Состояния (State Machine):
   - Idle, Walking, Jumping, Falling
   - Attacking, Hurt, Dead

2. Физика:
   - Гравитация
   - Переменная высота прыжка (зависит от удержания кнопки)
   - Coyote time (можно прыгнуть ~100ms после схода с платформы)
   - Jump buffer (прыжок регистрируется за ~100ms до приземления)

3. Параметры:
   - Скорость движения: 200
   - Сила прыжка: 400
   - Здоровье: 3 (сердца)
   - Неуязвимость после урона: 1.5 сек

4. Коллизии:
   - Категории: player, ground, enemy, collectible, hazard"
```

### 2.2 Система анимаций

```
Команда Claude Code:
"Создай AnimationManager:

1. Загрузка sprite sheets / texture atlases
2. Создание SKAction анимаций по имени
3. Кэширование анимаций

4. Анимации игрока (заглушки 32x32):
   - idle: 4 кадра, 0.2 сек/кадр
   - walk: 6 кадров, 0.1 сек/кадр
   - jump: 2 кадра
   - fall: 2 кадра
   - attack: 4 кадра, 0.08 сек/кадр
   - hurt: 2 кадра
   - death: 6 кадров

Создай placeholder текстуры (цветные прямоугольники)
для тестирования"
```

### 2.3 Атака и хитбоксы

```
Команда Claude Code:
"Реализуй систему атаки:

1. MeleeAttack:
   - Создаёт временный хитбокс перед игроком
   - Длительность: 0.3 сек
   - Урон: 1
   - Cooldown: 0.5 сек

2. Knockback система:
   - При получении урона отбрасывание
   - При нанесении урона враги отлетают

3. HitEffect:
   - Визуальный эффект удара (частицы/вспышка)
   - Звуковой эффект (placeholder)"
```

### 2.4 Коллекционные предметы

```
Команда Claude Code:
"Создай систему предметов:

1. Collectible (базовый класс):
   - Анимация парения
   - Эффект при сборе

2. Типы:
   - ManaCrystal: +10 маны (счётчик на UI)
   - HealthPickup: +1 сердце
   - PageCollectible: страница хроник (сохраняется)
   - Checkpoint: точка возрождения

3. Визуальное притяжение к игроку
   когда близко"
```

-----

## ФАЗА 3: ВРАГИ И ИИ

**Срок: 4-5 дней**

### 3.1 Базовый класс врага

```
Команда Claude Code:
"Создай Enemy базовый класс:

1. Параметры:
   - Здоровье
   - Урон при контакте
   - Скорость
   - Очки за убийство

2. Состояния:
   - Idle, Patrol, Chase, Attack, Hurt, Dead

3. Физика:
   - Коллизии с землёй и стенами
   - Разворот у края платформы

4. Общие методы:
   - takeDamage()
   - die() с анимацией и дропом
   - обнаружение игрока (raycast или дистанция)"
```

### 3.2 Типы врагов (уровни 1-3)

```
Команда Claude Code:
"Создай врагов для первых уровней:

1. Cultist (базовый враг):
   - HP: 1
   - Патрулирует отрезок
   - Бежит к игроку если видит
   - Можно убить прыжком сверху (как в Марио)

2. CorruptedSpirit (уровень 3):
   - HP: 1
   - Летает синусоидой
   - Периодически становится прозрачным (неуязвим)

3. FloatingEye:
   - HP: 1
   - Летает, стреляет снарядами
   - Снаряды можно уничтожить атакой

Создай placeholder спрайты для каждого"
```

### 3.3 Дополнительные враги (уровни 4-7)

```
Команда Claude Code:
"Создай врагов для средних уровней:

1. Skeleton (уровень 4):
   - HP: 2
   - Может блокировать атаку щитом
   - Окно уязвимости после атаки

2. IceGolem (уровень 5):
   - HP: 3
   - Медленный, но сильный удар
   - Не отбрасывается
   - Замораживает игрока при контакте (slow)

3. SkyDevourer (уровень 6):
   - HP: 2
   - Пикирует с высоты
   - Может схватить и поднять игрока

4. EliteCultist (уровень 7):
   - HP: 2
   - Телепорт на короткие дистанции
   - Атакует магией с расстояния"
```

### 3.4 Система боссов

```
Команда Claude Code:
"Создай Boss базовый класс:

1. Структура:
   - Несколько фаз (HP thresholds)
   - Паттерны атак для каждой фазы
   - Окна уязвимости
   - UI босс-бар

2. Первый босс: Defiler (уровень 1):
   Фаза 1 (HP 100%-50%):
   - Прыжок на игрока
   - Удар с волной по земле
   
   Фаза 2 (HP 50%-0%):
   - Быстрее двигается
   - Добавляется призыв мелких врагов

3. Арена босса:
   - Замкнутое пространство
   - Нет выхода пока босс жив
   - Возможно платформы для уворота"
```

### 3.5 Остальные боссы

```
Команда Claude Code:
"Создай оставшихся боссов:

Уровень 2 - ChainMaster Grondar:
- Механические руки атакуют с задержкой
- Разрушает платформы (нужно двигаться)
- Уязвим когда застревает

Уровень 3 - HeartOfCorruption:
- Стационарный босс
- Атакует щупальцами
- Нужно уничтожить защитные наросты

Уровень 4 - Archnecromancer Salvus:
- Призывает скелетов
- Телепортируется между точками
- Луч смерти (нужно прятаться)

Уровень 5 - FrostGuardian Kromar:
- Ледяные волны
- Сосульки с потолка
- Можно очистить вместо убийства (бонус)

Уровень 6 - SkyQueen Skirra:
- Бой на движущихся платформах
- Пикирующие атаки
- Призыв птенцов

Уровень 7 - General Maltorus:
- Самый сложный обычный босс
- Комбо атаки мечом
- Рывки
- Призыв культистов

Уровень 9 - Morgana:
- 3 фазы со сменой паттернов
- Тени, телепорты, призыв щупалец

Уровень 10 - Velkor:
- Не прямой бой
- Нужно активировать 4 цепи
- Уворачиваться от атак
- Финальный платформинг"
```

-----

## ФАЗА 4: УРОВНИ И КОНТЕНТ

**Срок: 7-10 дней**

### 4.1 Тайловая система

```
Команда Claude Code:
"Создай систему тайлов:

1. TileSet enum:
   - Ground (верх, середина, низ, углы)
   - Platform (тонкая, проходимая снизу)
   - Wall
   - Hazard (шипы, лава)
   - Decoration (трава, камни, факелы)

2. TileMapLoader:
   - Загрузка из JSON или TMX (Tiled format)
   - Автоматические соединения тайлов (autotiling)

3. Создай базовый тайлсет (placeholder):
   - 16x16 или 32x32 пиксели
   - Цветовая схема для теста"
```

### 4.2 Дизайн уровней

```
Команда Claude Code:
"Создай JSON структуру для каждого уровня:

Уровень 1 - Рассветный Шпиль:
- Размер: 100x15 тайлов
- Простые платформы для обучения
- 5 культистов
- 3 чекпоинта
- Мини-босс в конце
- Диалоговый триггер в начале

Уровень 2 - Мосты Бездны:
- Размер: 80x20 тайлов
- Много вертикали
- Разрушающиеся платформы
- Движущиеся платформы
- 8 врагов
- Босс-арена

[Продолжи для всех 10 уровней с уникальными
особенностями каждого согласно истории]"
```

### 4.3 Интерактивные объекты

```
Команда Claude Code:
"Создай интерактивные элементы:

1. CrumblingPlatform:
   - Трясётся когда игрок на ней
   - Падает через 1 сек
   - Восстанавливается через 3 сек

2. MovingPlatform:
   - Горизонтальное/вертикальное движение
   - Настраиваемый путь (waypoints)
   - Игрок двигается вместе с ней

3. Switch:
   - Активируется атакой или прыжком
   - Открывает двери/активирует платформы

4. Door:
   - Блокирует проход
   - Открывается ключом или свитчем

5. Checkpoint:
   - Сохраняет позицию респавна
   - Визуальная активация

6. DialogTrigger:
   - Запускает диалог при входе
   - Однократный

7. LevelExit:
   - Переход на следующий уровень
   - Анимация перехода"
```

### 4.4 Система диалогов

```
Команда Claude Code:
"Создай DialogSystem:

1. DialogData (JSON):
   - Массив реплик
   - Говорящий персонаж
   - Портрет (опционально)

2. DialogBox UI:
   - Полупрозрачный фон внизу экрана
   - Имя говорящего
   - Текст с эффектом печатной машинки
   - Tap для продолжения
   - Иконка 'продолжить'

3. Пауза геймплея во время диалога

4. Напиши диалоги для всех
   сюжетных моментов из сценария"
```

-----

## ФАЗА 5: ГЕНЕРАЦИЯ АССЕТОВ

**Срок: 5-7 дней**

### 5.1 Спрайты персонажей (AI генерация)

```
Стратегия:
Используй AI генерацию изображений (Midjourney/DALL-E/Stable Diffusion)
с последующей обработкой.

Промпты для Claude Code:
"Помоги составить промпты для генерации:

1. Каэль (главный герой):
   Prompt: "pixel art sprite sheet, 32x32, fantasy warrior
   with golden skin, white hair, blue cape, side view,
   game asset, transparent background, 8 frames walk cycle"

2. Враги: отдельный промпт для каждого типа

3. Боссы: более детальные, 64x64 или 128x128

После генерации:
- Создай скрипт для нарезки sprite sheet
- Конвертация в texture atlas для SpriteKit"
```

### 5.2 Обработка спрайтов

```
Команда Claude Code:
"Создай Python скрипт для обработки спрайтов:

1. Вход: сгенерированное AI изображение
2. Обработка:
   - Удаление фона (прозрачность)
   - Нарезка на отдельные кадры
   - Масштабирование до нужного размера
   - Применение единой палитры (ограничение цветов)
   
3. Выход:
   - Отдельные PNG файлы
   - Или готовый texture atlas

Используй Pillow и numpy"
```

### 5.3 Тайлсеты окружения

```
Команда Claude Code:
"Для каждой локации создай набор тайлов:

1. Рассветный Шпиль (уровень 1):
   - Каменные блоки (светлые)
   - Деревянные платформы
   - Горящие элементы
   - Разрушенные здания

2. Мосты Бездны (уровень 2):
   - Каменные мосты
   - Цепи
   - Облака/туман внизу

3. Корни Мира (уровень 3):
   - Дерево, кора, листья
   - Грибы (обычные и батуты)
   - Лианы

[Продолжи для всех локаций]

Создай промпты для AI генерации:
'tileset pixel art 32x32 fantasy [theme]
seamless tiles game asset'"
```

### 5.4 UI элементы

```
Команда Claude Code:
"Создай UI ассеты:

1. HUD:
   - Сердца (полное, половина, пустое)
   - Кристалл маны + счётчик
   - Иконка паузы

2. Виртуальные контролы:
   - Джойстик (база + ручка)
   - Кнопка прыжка
   - Кнопка атаки
   - Полупрозрачные, 64x64

3. Меню:
   - Кнопки (normal, pressed, disabled)
   - Панели/рамки
   - Слайдеры для настроек

4. Диалоги:
   - Рамка для текста
   - Портреты персонажей (Каэль, Тариэль, Моргана, Эльвира, Корина)"
```

### 5.5 Эффекты и частицы

```
Команда Claude Code:
"Создай систему частиц SpriteKit:

1. HitEffect:
   - Искры при ударе мечом
   - Белые/золотые частицы

2. DeathEffect:
   - Враг распадается на частицы
   - Фиолетовые для скверных

3. CollectEffect:
   - Спиральные частицы при сборе
   - Цвет зависит от предмета

4. JumpDust:
   - Пыль при приземлении
   - Облачко при прыжке

5. MagicEffect:
   - Для атак врагов
   - Для Семени Жизни

6. EnvironmentParticles:
   - Снег (уровень 5)
   - Листья (уровень 3)
   - Пепел (уровень 1)

Используй SKEmitterNode и .sks файлы"
```

-----

## ФАЗА 6: АУДИО

**Срок: 3-4 дня**

### 6.1 Звуковые эффекты

```
Команда Claude Code:
"Создай AudioManager и интегрируй звуки:

1. Источники звуков (бесплатные):
   - freesound.org
   - opengameart.org
   - Генерация через sfxr/bfxr

2. Список необходимых звуков:
   Player:
   - jump.wav
   - land.wav
   - attack_swing.wav
   - hit_enemy.wav
   - take_damage.wav
   - death.wav
   - footstep.wav (несколько вариаций)
   
   Enemies:
   - enemy_hit.wav
   - enemy_death.wav
   - enemy_attack.wav
   
   UI:
   - button_click.wav
   - menu_select.wav
   - pause.wav
   
   Collectibles:
   - coin_pickup.wav
   - health_pickup.wav
   - checkpoint.wav
   
   Environment:
   - door_open.wav
   - platform_crumble.wav

3. AudioManager:
   - Пул звуков для частых эффектов
   - Контроль громкости
   - Пространственный звук (удалённые звуки тише)"
```

### 6.2 Музыка

```
Команда Claude Code:
"Интегрируй музыкальное сопровождение:

1. Источники (royalty-free):
   - opengameart.org
   - incompetech.com
   - AI генерация (Suno, Udio - проверь лицензию)

2. Треки:
   - main_menu.mp3 (эпический, героический)
   - level_1_burning_village.mp3 (тревожный)
   - level_2_bridges.mp3 (напряжённый)
   - level_3_forest.mp3 (мистический)
   - level_4_catacombs.mp3 (мрачный)
   - level_5_ice.mp3 (холодный, эхо)
   - level_6_sky.mp3 (воздушный)
   - level_7_fortress.mp3 (военный)
   - level_8_citadel.mp3 (зловещий)
   - boss_battle.mp3 (интенсивный)
   - final_boss.mp3 (эпический)
   - victory.mp3 (торжественный)
   - credits.mp3 (спокойный)

3. MusicManager:
   - Плавные переходы между треками
   - Отдельный контроль громкости
   - Loop с учётом точки цикла"
```

-----

## ФАЗА 7: UI И МЕНЮ

**Срок: 3-4 дня**

### 7.1 Главное меню

```
Команда Claude Code:
"Создай MainMenuScene:

1. Визуал:
   - Анимированный фон (парящие острова)
   - Логотип игры с эффектом свечения
   - Параллакс при движении устройства (гироскоп)

2. Кнопки:
   - Новая игра
   - Продолжить (если есть сохранение)
   - Выбор уровня (разблокированные)
   - Настройки
   - Титры

3. Анимации:
   - Появление элементов
   - Hover эффект на кнопках
   - Переходы между экранами"
```

### 7.2 Игровой HUD

```
Команда Claude Code:
"Создай GameHUD:

1. Верхний левый угол:
   - Сердца здоровья (анимированные)
   - Счётчик маны/кристаллов
   - Номер уровня

2. Верхний правый угол:
   - Кнопка паузы

3. Нижние углы:
   - Виртуальный джойстик (левый)
   - Кнопки действий (правый)

4. Центр (появляется по событиям):
   - Название уровня при старте
   - 'CHECKPOINT' при активации
   - 'BOSS' при встрече с боссом

5. Адаптация под разные размеры экрана
   (Safe area для iPhone с notch)"
```

### 7.3 Меню паузы

```
Команда Claude Code:
"Создай PauseMenu:

1. Overlay поверх игры (затемнение)

2. Опции:
   - Продолжить
   - Начать уровень заново
   - Настройки звука
   - Выход в меню (с подтверждением)

3. Игра полностью останавливается

4. Анимация появления/скрытия"
```

### 7.4 Экран выбора уровней

```
Команда Claude Code:
"Создай LevelSelectScene:

1. 10 иконок уровней:
   - Разблокированные: цветные, с превью
   - Заблокированные: серые, с замком
   - Пройденные: звёздочка/галочка

2. Для каждого уровня показывать:
   - Название
   - Лучший результат (кристаллы собранные)
   - Страницы хроник найденные

3. Горизонтальный скролл или сетка"
```

### 7.5 Экраны победы/поражения

```
Команда Claude Code:
"Создай результирующие экраны:

1. GameOverScreen:
   - 'ПОРАЖЕНИЕ' с эффектом
   - Кнопки: Заново / Выход в меню
   - Статистика попытки

2. LevelCompleteScreen:
   - 'УРОВЕНЬ ПРОЙДЕН'
   - Собрано кристаллов: X/Y
   - Найдено секретов: X/Y
   - Время прохождения
   - Кнопка 'Следующий уровень'

3. GameCompleteScreen:
   - Эпилог (текст)
   - Финальная картинка
   - Титры с музыкой
   - Послетитровая сцена"
```

-----

## ФАЗА 8: ПОЛИРОВКА

**Срок: 4-5 дней**

### 8.1 Screen shake и эффекты камеры

```
Команда Claude Code:
"Добавь camera effects:

1. ScreenShake:
   - Интенсивность и длительность настраиваемые
   - При ударах, взрывах, приземлении босса

2. SlowMotion:
   - При смерти врага (очень короткий)
   - При получении урона

3. Flash:
   - Белая вспышка при сборе важного предмета
   - Красный оттенок при уроне

4. Zoom:
   - Приближение на босса при появлении
   - Отдаление при эпических моментах"
```

### 8.2 Juice (сочность геймплея)

```
Команда Claude Code:
"Добавь 'juice' эффекты:

1. Squash & Stretch:
   - Игрок сжимается при приземлении
   - Растягивается в прыжке
   - Враги сплющиваются при ударе

2. Anticipation:
   - Небольшое приседание перед прыжком
   - Замах перед атакой

3. Trail effects:
   - След за мечом при атаке
   - След за игроком при рывке

4. Tweening:
   - Используй SKAction с easing
   - Пружинистые анимации для UI"
```

### 8.3 Производительность

```
Команда Claude Code:
"Оптимизируй производительность:

1. Texture Atlas:
   - Объедини все спрайты в атласы
   - Отдельный атлас на уровень

2. Object Pooling:
   - Пул для снарядов
   - Пул для частиц
   - Пул для эффектов

3. Culling:
   - Не обновлять объекты за пределами камеры
   - Не рендерить невидимое

4. Профилирование:
   - Instruments для поиска узких мест
   - Цель: 60 FPS на iPhone 11+"
```

### 8.4 Сохранение прогресса

```
Команда Claude Code:
"Реализуй систему сохранения:

1. SaveData (Codable):
   - Текущий уровень
   - Разблокированные уровни
   - Для каждого уровня: пройден, кристаллы, секреты
   - Настройки (громкость, чувствительность)
   - Прогресс коллекционных предметов

2. Автосохранение:
   - При прохождении чекпоинта
   - При завершении уровня
   - При выходе в меню

3. CloudKit (опционально):
   - Синхронизация между устройствами

4. Валидация:
   - Проверка целостности сохранения"
```

-----

## ФАЗА 9: ТЕСТИРОВАНИЕ

**Срок: 3-4 дня**

### 9.1 Симулятор

```
Команда Claude Code:
"Создай систему для тестирования:

1. Debug режим:
   - Показ FPS, draw calls, node count
   - Показ collision boxes
   - Кнопка перехода на любой уровень
   - Бессмертие для тестов
   - Телепортация (tap на экране)

2. Тест на симуляторах:
   - iPhone SE (маленький экран)
   - iPhone 15 Pro Max (большой экран)
   - iPad

3. Автоматические тесты:
   - Unit тесты для GameManager
   - Unit тесты для сохранения
   - Snapshot тесты для UI"
```

### 9.2 Реальное устройство

```
Последовательность действий:

1. Подключи iPhone к Mac
2. В Xcode выбери своё устройство как target
3. Настрой signing:
   - Automatic signing
   - Выбери свой Team (Apple ID)
4. Build & Run (Cmd + R)

Что проверить:
□ Touch-контролы отзывчивые
□ Нет задержки ввода
□ Стабильные 60 FPS
□ Звук работает
□ Переходы плавные
□ Safe area учтена
□ Разные условия освещения экрана
□ С наушниками и без
□ При входящих звонках/уведомлениях
```

### 9.3 Чек-лист тестирования

```
Команда Claude Code:
"Создай чек-лист в Markdown:

ОБЩЕЕ:
□ Игра запускается без крашей
□ Все уровни загружаются
□ Сохранение работает корректно
□ Переходы между сценами без артефактов

ГЕЙМПЛЕЙ:
□ Управление отзывчивое
□ Прыжки консистентные
□ Коллизии работают правильно
□ Все враги ведут себя предсказуемо
□ Все боссы проходимы
□ Все уровни проходимы

AUDIO:
□ Музыка играет в каждой сцене
□ Звуки не перекрываются плохо
□ Громкость настраивается
□ Нет артефактов/щелчков

UI:
□ Все кнопки нажимаются
□ Текст читаемый
□ HUD не мешает геймплею
□ Адаптация под разные экраны

EDGE CASES:
□ Сворачивание приложения
□ Входящий звонок
□ Низкий заряд батареи
□ Нет интернета (если нужен)"
```

-----

## ФАЗА 10: ПУБЛИКАЦИЯ

**Срок: 2-3 дня**

### 10.1 Подготовка к App Store

```
Команда Claude Code:
"Подготовь материалы для App Store:

1. Иконка приложения:
   - 1024x1024 PNG
   - Без альфа-канала
   - Яркая, узнаваемая

2. Скриншоты:
   - 6.7" (iPhone 15 Pro Max)
   - 6.5" (iPhone 11 Pro Max)
   - 5.5" (iPhone 8 Plus)
   - 12.9" iPad Pro

3. App Preview видео (опционально):
   - До 30 секунд
   - Захват геймплея

4. Описание:
   - Короткое (до 170 символов)
   - Полное (до 4000 символов)
   - Ключевые слова (до 100 символов)

5. Категория: Games > Action > Platformer

6. Возрастной рейтинг:
   - Заполни опросник (Fantasy Violence)

7. Privacy Policy URL (обязательно)"
```

### 10.2 App Store Connect

```
Шаги:
1. Создай App в App Store Connect
2. Заполни метаданные
3. Загрузи скриншоты
4. В Xcode:
   - Product > Archive
   - Distribute App > App Store Connect
   - Upload
5. В App Store Connect:
   - Выбери build
   - Submit for Review

Время review: обычно 24-48 часов
```

### 10.3 Финальная сборка

```
Команда Claude Code:
"Подготовь release build:

1. Убери debug код:
   - Убери debug UI
   - Отключи читы
   - Убери print statements

2. Настрой Info.plist:
   - Bundle version
   - Required device capabilities
   - Supported orientations

3. Оптимизация:
   - Build configuration: Release
   - Bitcode: Yes
   - Strip debug symbols

4. Проверь:
   - Все ассеты включены
   - Нет placeholder контента
   - Версия и билд номер актуальны"
```

-----

## ИТОГОВАЯ ТАЙМЛАЙН

|Фаза     |Описание            |Дни          |
|---------|--------------------|-------------|
|0        |Подготовка окружения|1            |
|1        |Архитектура и каркас|3-4          |
|2        |Игрок и физика      |4-5          |
|3        |Враги и ИИ          |4-5          |
|4        |Уровни и контент    |7-10         |
|5        |Генерация ассетов   |5-7          |
|6        |Аудио               |3-4          |
|7        |UI и меню           |3-4          |
|8        |Полировка           |4-5          |
|9        |Тестирование        |3-4          |
|10       |Публикация          |2-3          |
|**ИТОГО**|                    |**39-52 дня**|

-----

## СОВЕТЫ ПО РАБОТЕ С CLAUDE CODE

### Структура запросов

```
Хорошо:
"Создай класс Player с state machine.
Состояния: Idle, Walking, Jumping, Falling, Attacking.
Используй enum для состояний.
Добавь методы перехода между состояниями.
Включи базовую физику гравитации."

Плохо:
"Сделай персонажа"
```

### Итеративная разработка

```
1. Попроси создать базовую версию
2. Протестируй в симуляторе
3. Попроси исправить конкретные проблемы
4. Попроси добавить фичи по одной
```

### Отладка

```
"У меня ошибка: [текст ошибки]
Вот код, который её вызывает: [код]
Что не так и как исправить?"
```

### Рефакторинг

```
"Вот мой класс GameManager.
Он стал слишком большим.
Предложи как разделить его на компоненты,
сохранив функциональность."
```

-----

Этот план даёт полную дорожную карту от пустого проекта до публикации в App Store. Каждый шаг содержит конкретные команды для Claude Code, которые ты можешь использовать или адаптировать под свои нужды.​​​​​​​​​​​​​​​​